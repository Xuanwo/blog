<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mac on Xuanwo&#39;s Blog</title><link>https://xuanwo.io/tags/mac/</link><description>Recent content in Mac on Xuanwo&#39;s Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Sat, 05 Jan 2019 05:00:00 +0000</lastBuildDate><atom:link href="https://xuanwo.io/tags/mac/index.xml" rel="self" type="application/rss+xml"/><item><title>随缘分享第 2 期</title><link>https://xuanwo.io/2019/01/05/share-with-luck-2nd/</link><pubDate>Sat, 05 Jan 2019 05:00:00 +0000</pubDate><guid>https://xuanwo.io/2019/01/05/share-with-luck-2nd/</guid><description>&lt;p&gt;万万没有想到我也有一周双更的时候（，素材攒的太多了，赶紧分享一下~&lt;/p&gt;
&lt;h2 id=&#34;今天你翻车了吗&#34;&gt;今天你翻车了吗？&lt;/h2&gt;
&lt;h3 id=&#34;fwupd-翻车&#34;&gt;fwupd 翻车&lt;/h3&gt;
&lt;p&gt;说起来用 Arch 也有一段时间了，大的翻车没遇到过，小的翻车倒是经常遇到。1 月 2 号晚上睡前日常更新，发现更新了 fwupd 1.2.2 之后就顺手试了一下，结果发现命令行直接 timeout 了，想着可能是我升级之后还没有重启服务，然后 &lt;code&gt;systemd restart fwupd&lt;/code&gt; 结果报错了，于是查了下日志：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;-- Unit fwupd.service has begun starting up.
Jan &lt;span style=&#34;color:#40a070&#34;&gt;02&lt;/span&gt; &lt;span style=&#34;color:#40a070&#34;&gt;00&lt;/span&gt;:09:21 thinkpad-x1-carbon fwupd&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;7066&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt;: Failed to get PCR0s: missing executable tpm2_pcrlist in PATH
Jan &lt;span style=&#34;color:#40a070&#34;&gt;02&lt;/span&gt; &lt;span style=&#34;color:#40a070&#34;&gt;00&lt;/span&gt;:09:21 thinkpad-x1-carbon fwupd&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;7066&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt;: Failed to load engine: Failed to prepare SQL: no such column: protocol
Jan &lt;span style=&#34;color:#40a070&#34;&gt;02&lt;/span&gt; &lt;span style=&#34;color:#40a070&#34;&gt;00&lt;/span&gt;:09:21 thinkpad-x1-carbon systemd&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt;: fwupd.service: Main process exited, &lt;span style=&#34;color:#bb60d5&#34;&gt;code&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;exited, &lt;span style=&#34;color:#bb60d5&#34;&gt;status&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;1&lt;/span&gt;/FAILURE
Jan &lt;span style=&#34;color:#40a070&#34;&gt;02&lt;/span&gt; &lt;span style=&#34;color:#40a070&#34;&gt;00&lt;/span&gt;:09:21 thinkpad-x1-carbon systemd&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt;: fwupd.service: Failed with result &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#39;exit-code&amp;#39;&lt;/span&gt;.
Jan &lt;span style=&#34;color:#40a070&#34;&gt;02&lt;/span&gt; &lt;span style=&#34;color:#40a070&#34;&gt;00&lt;/span&gt;:09:21 thinkpad-x1-carbon systemd&lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#40a070&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt;: Failed to start Firmware update daemon.
-- Subject: Unit fwupd.service has failed&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;emmmmm，&lt;code&gt;no such column: protocol&lt;/code&gt; ？这看着是 DB 没做兼容啊，估计是上游翻车了，在 archcn 的群里问了一声没什么回应，于是先睡了，明天再说。&lt;/p&gt;
&lt;p&gt;第二天早上看了下，已经有人在 arch 这边提了 BUG 了：&lt;a href=&#34;https://bugs.archlinux.org/task/61241?project=5&amp;amp;string=fwupd&#34;&gt;FS#61241 - fwupdmgr Failed to activate service&lt;/a&gt;，但是我感觉应该不是打包的问题，于是直接给上游提了个 BUG：&lt;a href=&#34;https://github.com/hughsie/fwupd/issues/909&#34;&gt;After upgrade to 1.2.2, fwupd failed to start for SQL error&lt;/a&gt;。作者 &lt;a href=&#34;https://github.com/hughsie&#34;&gt;hughsie&lt;/a&gt; 是红帽的员工，维护着不少知名的开源项目。&lt;/p&gt;
&lt;p&gt;响应速度还算挺快的，考虑我们中间还隔着时差，按照他的要求提供了 &lt;code&gt;pending.db&lt;/code&gt; 之后没多久就加了个修复的 &lt;a href=&#34;https://github.com/hughsie/fwupd/commit/48106951c814f0bee201845fc1cc9cbb0f143faf&#34;&gt;commit&lt;/a&gt;，自行打包了一个 fwupd 测试了一下，确认工作正常并回复了作者。历时大概三天左右，这个 BUG 被修复了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;说起来，现在嵌入式 DB 领域好像除了 SQLite 之外就没有一个能打的支持 SQL 的选手了啊？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;gitea-升级翻车&#34;&gt;gitea 升级翻车&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;改配置已经很糟心了，这 gitea 甚至还要改运行的用户 = =，我觉得这样不行&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一波升级之后，gitea 刷了一大波说明出来：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;warning: /etc/gitea/app.ini installed as /etc/gitea/app.ini.pacnew
gitea now uses its own user/group instead of the git ones.
Ownership of /var/lib/gitea tree has been changed accordingly.
You need to update your /etc/gitea/app.ini file to change the
RUN_USER variable at the top.
Next step is fixing the SSH configuration. If you have:
AllowUsers git
in /etc/ssh/sshd_config, you need to change that to gitea.
Then restart sshd.service.
You will need to tell all your users that they have to change
git@ to gitea@ in their repos clones using git remote set-url.
If you use a PostgreSQL DB upon Unix socket, you need to fix
your &lt;span style=&#34;color:#666&#34;&gt;[&lt;/span&gt;database&lt;span style=&#34;color:#666&#34;&gt;]&lt;/span&gt; configuration and switch USER to gitea.
Then, you need to change it also in /var/lib/data/pg_hba.conf.
Finally, as postgres user, run psql and inside it type:
ALTER USER git RENAME TO gitea;
&lt;span style=&#34;color:#4070a0;font-weight:bold&#34;&gt;\q&lt;/span&gt;
Then restart postgresql.service.
In all cases, you &lt;span style=&#34;color:#007020;font-weight:bold&#34;&gt;then&lt;/span&gt; need to reload systemd units and
restart gitea.service.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;按照要求改了配置，重启了服务。服务是好了- -，但是所有 clone 的 git url 都要改了，有点麻烦。感觉这个变动就很坑了，作为一个后端服务，内部的配置改了就改了，也就是维护起来麻烦一点，但是对外（对用户）暴露的东西不能乱动。得亏我这个 gitea 就自己用用，要是真的有别人在用的话，还得群发个邮件让他们把本地的 remote URL 都改一遍，坑，gitea 好感度减 10。&lt;/p&gt;
&lt;h3 id=&#34;apfs-翻车&#34;&gt;APFS 翻车&lt;/h3&gt;
&lt;p&gt;在一个风平浪静的早晨，惠老师突然在水群 Po 了一张图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;rm-failed.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这是啥操作，删除文件提示没空间？&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;open-terminal-failed.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Terminal 也打不开了，2333。&lt;/p&gt;
&lt;p&gt;后来了解情况的群友解释了一下原因，其实这是两个问题：&lt;/p&gt;
&lt;p&gt;第一个是采用 CoW 的文件系统固有的问题。我们都知道 CoW 的基本原理是在对数据进行修改的时候，不会直接在原来的数据位置上进行操作，而是重新找个位置修改。那么在磁盘已经完全满了之后就可能会出现问题，问题的起因有两种说法：第一是在删除的时候需要在一个空闲的位置写入一个新的标记，表示这个文件被删除了；第二是文件系统之前有 snapshot，被删除的文件还在被别的 snapshot 引用着，所以不能直接删除，需要加一个标记。所以类似机制的文件系统都可能会出现这样的问题，包括 ZFS 和 Btrfs。&lt;/p&gt;
&lt;p&gt;第二个是 macOS 在磁盘系统全满的情况下的行为是不可预测的行为，没人知道会发生什么。所以会出现 Terminal 打不开，Finder 打开直接卡住这种事情。&lt;/p&gt;
&lt;p&gt;最后惠老师进入恢复模式，执行了硬盘急救，最后多了一丢丢，大概 500MB 的空间，终于可以把文件删掉了（&lt;/p&gt;
&lt;h2 id=&#34;无意义以及其存在的意义&#34;&gt;无意义以及其存在的意义&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;conway-eeeee.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;前一段时间疯狂刷屏的 &lt;a href=&#34;https://github.com/eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee/eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&#34;&gt;e98e&lt;/a&gt; 在整个项目被 Archive 进入 read-only 之后热潮消退了。在最开始的时候我非常反感，感觉自己受到了精神污染，甚至想要举报一波，然而并没有找到合适的理由。现在回过头来想一想这个事情，感觉心情非常复杂，总是会去想是不是自己做错了什么，或者说当我在一个公共场合（比如 Telegram 的群中）轻蔑的说某样事情 &lt;strong&gt;无聊&lt;/strong&gt;，&lt;strong&gt;没意义&lt;/strong&gt; 的时候，我是不是真的明白我在说什么。&lt;/p&gt;
&lt;p&gt;这个问题我琢磨了很久，最后感觉它是由一组复杂的问题组成的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对一个事务的意义判断究竟是谁来做的？&lt;/li&gt;
&lt;li&gt;无意义的事务有没有存在的意义？&lt;/li&gt;
&lt;li&gt;&amp;hellip;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不知道是不是受到教育环境的影响，我总是会倾向于去做 &lt;code&gt;有意义&lt;/code&gt; 的事情。那 &lt;code&gt;有意义&lt;/code&gt; 又是意味着什么呢，大多数时候它要 &lt;code&gt;有价值&lt;/code&gt;，而更大多数时候可以概括为 &lt;code&gt;有用&lt;/code&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;玩游戏，就不能浪费时间，玩 1 分钟就要获得 1 分钟的快乐&lt;/li&gt;
&lt;li&gt;做开源项目就得要出名，要有 Star，要有人关注，要有人用在生产环境上&lt;/li&gt;
&lt;li&gt;&amp;hellip;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以说，世界上到底有没有没意义的事情的呢？可能只存在&lt;strong&gt;我认为&lt;/strong&gt;没意义的事情吧。&lt;/p&gt;
&lt;p&gt;这些问题我可能是想不清楚了，只能一直这么纠结下去，以后遇到所谓的没意义的东西，我大概会选择保持沉默吧：“我觉得你做的事情没意义，但是我尊重你做下去的权利”。&lt;/p&gt;
&lt;h2 id=&#34;有啥有意思的东西嘛&#34;&gt;有啥有意思的东西嘛？&lt;/h2&gt;
&lt;p&gt;2018 年最后入手的东西是 OnePlus 6T 和一把宜家的转椅。&lt;/p&gt;
&lt;p&gt;这么多年过去了，安卓的变化比我想象的还要大，特别是在一加 Oxygen OS 的支持下，感觉到了前所未有的舒畅。虽然国内的生态一如既往的糟糕，但是大多数应用都能用，某些实在流氓或者 Google Play 中没有的应用也直接扔到了 Work Profile 里面。现在基本上是晚上充满电上床看小说，然后第二天直接带去上班，到晚上回家还能有 40% ~ 50% 的电量，已经完全够用了，And 快充也非常给力。用了几个星期，完全不怀念我的 iPhone。&lt;/p&gt;
&lt;p&gt;之前用的转椅是前同事留在房子里面的，一直凑或用，但是有一天实在忍不了了，决定换一把新的转椅。在朋友 P 的安利下入了宜家的 &lt;a href=&#34;https://www.ikea.cn/cn/zh/catalog/products/50137208/&#34;&gt;MARKUS 马库斯&lt;/a&gt; 转椅，深灰色那款只要 999 元，加上运费总共 1068 元。花了点时间拼了起来，一坐上去整个人就不想起来了，实在是太舒服了。腰部和头部还有手臂都被正好支撑起来，终于不会写着代码感觉自己整个脖子都僵住了。&lt;/p&gt;
&lt;p&gt;这个椅子支持上下大概 10 cm，向后 30 度左右的调节。配合自己之前买的显示器支架，可以舒舒服服的躺着看动漫，打游戏，生活美滋滋。如果有想换椅子的同学无比留意下~&lt;/p&gt;
&lt;p&gt;最近还看到一个好玩的 issue： &lt;a href=&#34;https://github.com/antirez/redis/issues/3909&#34;&gt;https://github.com/antirez/redis/issues/3909&lt;/a&gt; ，一个人不小心发了个 issue，然后解释道：“Cat walked over the keyboard sorry guys.”，引发了一场评论区的狂欢。我觉得最好玩的回复是项目的作者回复的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Observing the keys pressed we can assume the cat was diagonally exploring the keyboard, probably with the front paws oriented towards the &amp;ldquo;/=-[&amp;rdquo; part of the keyboard (right/bottom) since there is more variability there, compared to the (maybe) rear paw staying near the number &amp;ldquo;3&amp;rdquo; (and the other rear paw probably outside the keyboard, in the upper part). However the size of the cat should be very small in that case, or the size of the keyboard should be very large, if we are not willing to assume a reduced-length cat because of attack position or alike.&lt;/p&gt;
&lt;p&gt;Btw if you could report the &lt;code&gt;INFO&lt;/code&gt; output of your Redis instance, we may be able to perform more educated guesses about the conditions of your cat.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;集段子与安利于一身，是值得我学习的楷模~&lt;/p&gt;
&lt;h2 id=&#34;最近又看了啥项目&#34;&gt;最近又看了啥项目？&lt;/h2&gt;
&lt;p&gt;首先简单介绍一下这个 &lt;code&gt;好玩&lt;/code&gt; 和 &lt;code&gt;有用&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;好玩&lt;/code&gt;：是说 &lt;strong&gt;我&lt;/strong&gt; 觉得这个项目很好玩，有意思
&lt;code&gt;有用&lt;/code&gt;：是说 &lt;strong&gt;我&lt;/strong&gt; 觉得这个项目能派上用场&lt;/p&gt;
&lt;p&gt;如你所见，只有三个组合，因为又不好玩又没用的项目写它干啥呢？&lt;/p&gt;
&lt;h3 id=&#34;好玩又有用&#34;&gt;好玩又有用&lt;/h3&gt;
&lt;h4 id=&#34;vegeta&#34;&gt;Vegeta&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/tsenart/vegeta&#34;&gt;https://github.com/tsenart/vegeta&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;打开这个项目的时候被正面冲过来的贝吉塔吓了一跳，当时就记住了它，然后才反应过来项目名字就是用的贝吉塔的英文：Vegeta。大概寓意着这个项目跟超级塞亚人一样强悍吧，哈哈。&lt;/p&gt;
&lt;p&gt;这是一个用来做 HTTP 负载测试的库和工具，既可以在代码中调用，也可以直接作为工具使用。项目维护的还不错，以后会考虑用它。&lt;/p&gt;
&lt;h4 id=&#34;nats&#34;&gt;NATS&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://nats.io/&#34;&gt;https://nats.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;NATS 是一个云原生消息系统，是一个 CNCF 项目。它的消息格式很有意思，是一个类似于 Redis 的 text based protocol，我个人很喜欢，简单才是美啊。大概也得益于这么简单的 Protocol 设计，它的吞吐量很大，按照项目给出的评测，它的吞吐量是 Kafka 的两倍，RabbitMQ 的十倍。&lt;/p&gt;
&lt;p&gt;项目的设计目标给的非常清晰：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Highly performant (fast)&lt;/li&gt;
&lt;li&gt;Always on and available (dial tone)&lt;/li&gt;
&lt;li&gt;Extremely lightweight (small footprint)&lt;/li&gt;
&lt;li&gt;Support for multiple qualities of service (including guaranteed “at-least-once” delivery with NATS Streaming)&lt;/li&gt;
&lt;li&gt;Support for various messaging models and use cases (flexible)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果有合适的场景，我大概会考虑玩一玩~&lt;/p&gt;
&lt;h4 id=&#34;uncaptcha2&#34;&gt;uncaptcha2&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/ecthros/uncaptcha2&#34;&gt;https://github.com/ecthros/uncaptcha2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一个今天才看到的段子，思路很有意思，就是输出 Google reCAPTCHA 的语音验证码，然后用 Google 的语音转文字 API 来做识别，然后再填回去，据说识别率还非常不错。&lt;/p&gt;
&lt;p&gt;哈哈哈，这个真的是现实版的以子之矛，攻子之盾了。&lt;/p&gt;
&lt;h4 id=&#34;badger&#34;&gt;badger&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/dgraph-io/badger&#34;&gt;https://github.com/dgraph-io/badger&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一个很早之前看过的项目了，但是有两个比较有意思的事情：&lt;/p&gt;
&lt;p&gt;一个是有奖征集数据丢失的场景：&lt;a href=&#34;https://github.com/dgraph-io/badger/issues/601&#34;&gt;Prove that Badger loses data&lt;/a&gt;，只要你能够按照要求给出可复现数据丢失的步骤，就能获得 $1337 。感兴趣的童鞋可以去试试。&lt;/p&gt;
&lt;p&gt;另一个是 badger 增加了一组 &lt;a href=&#34;https://github.com/dgraph-io/badger/pull/577&#34;&gt;Jepsen-style bank test&lt;/a&gt;，会在他们内部的 CI 平台上运行，可以看&lt;a href=&#34;https://teamcity.dgraph.io/viewType.html?buildTypeId=Badger_BankTest&#34;&gt;现场直播&lt;/a&gt;。&lt;a href=&#34;https://jepsen.io/&#34;&gt;Jepsen&lt;/a&gt; 我是在看 PingCAP 的相关技术分享时候看到的，Jepsen 是一个分布式系统验证的框架，已经成功发现了很多系统的 BUG。&lt;/p&gt;
&lt;p&gt;之前有个项目技术选型的时候没用 Badger，之后大概可以考虑一下。&lt;/p&gt;
&lt;p&gt;BTW，他们的项目管理似乎有些问题，依赖管理没做，完全靠 go get，Makefile 也没有，新人想要参与开发感觉是一脸懵逼。Windows 平台上的 CI 一直都是挂的，我还提了个 PR 修了其中的一个：&lt;a href=&#34;https://github.com/dgraph-io/badger/pull/661&#34;&gt;test: Fix TestDropReadOnly failed on windows&lt;/a&gt;，在我这个 PR 之后他们又 Fix 了不少 windows 上的测试，估计再过一段时间就能恢复正常了。他们是怎么忍下去的- -，我完全接受不了一个项目 Master 分支上的 CI 都是挂的，那还不如去掉呢。。。&lt;/p&gt;
&lt;h3 id=&#34;有用不好玩&#34;&gt;有用不好玩&lt;/h3&gt;
&lt;h4 id=&#34;gradle&#34;&gt;gradle&lt;/h4&gt;
&lt;p&gt;Adaptable, fast automation for all &lt;a href=&#34;https://gradle.org&#34;&gt;https://gradle.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;以前只是听做 Java 开发同事天天吐槽 gradle，以为只是 Java 生态下的一个工具，定位类似于 npm for node.js，但是今天看了项目才知道原来它的目标是构建自动化并且要支持多语言的开发。&lt;/p&gt;
&lt;p&gt;这个自动化跟我想要的不太一样。&lt;/p&gt;
&lt;h4 id=&#34;cloudevents&#34;&gt;cloudevents&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://cloudevents.io/&#34;&gt;https://cloudevents.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;有一个定义云消息的规范，还是基于 JSON 的，看起来大概是这个样子：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;specversion&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;0.2&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;com.github.pull.create&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;source&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;https://github.com/cloudevents/spec/pull/123&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;A234-1234-1234&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;2018-04-05T17:31:00Z&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;comexampleextension1&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;comexampleextension2&amp;#34;&lt;/span&gt; : {
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;othervalue&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#40a070&#34;&gt;5&lt;/span&gt;
},
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;contenttype&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;text/xml&amp;#34;&lt;/span&gt;,
&lt;span style=&#34;color:#062873;font-weight:bold&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;&amp;lt;much wow=\&amp;#34;xml\&amp;#34;/&amp;gt;&amp;#34;&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;无爱。&lt;/p&gt;
&lt;h3 id=&#34;好玩但没用&#34;&gt;好玩但没用&lt;/h3&gt;
&lt;h4 id=&#34;lsix&#34;&gt;lsix&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/hackerb9/lsix&#34;&gt;https://github.com/hackerb9/lsix&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一个为图片设计的 ls，emmm，感觉没有啥特别的用处，虽然确实挺好玩的就是了。&lt;/p&gt;
&lt;h4 id=&#34;ungoogled-chromium&#34;&gt;ungoogled-chromium&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Eloston/ungoogled-chromium&#34;&gt;https://github.com/Eloston/ungoogled-chromium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;清真版本的 Chromium，去掉了 Google 相关的代码，据说非常清真，但是我是 Google 的粉丝，甚至电脑上用的就是 Chrome - -，因此就是围观一下。&lt;/p&gt;
&lt;h4 id=&#34;citybound&#34;&gt;citybound&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/citybound/citybound&#34;&gt;https://github.com/citybound/citybound&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一个开源版本的城市模拟，感觉还比较早起，只有一些雏形，还玩不起来，还需要再观察观察。引擎本身是用 rust 写的，前端很有意思，用的是一个叫做 &lt;a href=&#34;https://webflow.com/&#34;&gt;webflow&lt;/a&gt; 产品，交互比较酷炫。可能我这样的前端白痴也有救了？&lt;/p&gt;
&lt;h2 id=&#34;说点坑爹事情大家开心开心&#34;&gt;说点坑爹事情大家开心开心&lt;/h2&gt;
&lt;p&gt;偶然发现Chrome 砍掉了 &lt;code&gt;chrome://net-internals/#events&lt;/code&gt; 这个功能。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;坑爹啊！&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The net-internals events viewer and related functionality has been removed. Please use chrome://net-export to save netlogs and the external catapult netlog_viewer to view them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;现在想要查看 Chrome 的网络交互细节只能打开 &lt;code&gt;chrome://net-export&lt;/code&gt; 点击开始导出，操作完了再结束导出，最后用一个外部工具导入再查看了。&lt;/p&gt;
&lt;p&gt;Hugging you, Google!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;以上就是本期随缘分享的全部内容~&lt;/p&gt;</description></item><item><title>史上最详细的虚拟机安装Mac OS X图文教程</title><link>https://xuanwo.io/2015/08/09/vmware-mac-os-x-intro/</link><pubDate>Sun, 09 Aug 2015 01:30:51 +0000</pubDate><guid>https://xuanwo.io/2015/08/09/vmware-mac-os-x-intro/</guid><description>&lt;p&gt;最近在电脑上配置了VMware，想要搭建一个Mac OS X的虚拟机以供体验。不过网上的资料过于老旧，版本更新不及时，导致我在配置的过程中遇到了无数的坑，折腾了一个晚上才配置成功。事后我总结了相关的经验和实践完成了这份教程，希望能够对大家有所益处~&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Update:
因为要用到&lt;a href=&#34;https://xuanwo.io/2015/10/22/vagrant-intro/&#34;&gt;Vagrant&lt;/a&gt;，所以又捣鼓了一番在VirtualBox上安装Mac OS X，同样踩了不少坑，相关的总结如下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;需要准备的东西&#34;&gt;需要准备的东西&lt;/h1&gt;
&lt;h2 id=&#34;懒人包镜像&#34;&gt;懒人包镜像&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://pan.baidu.com/s/1ntkw77V&#34;&gt;OS X 10.10 懒人包镜像 密码:a5cq&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;基于vmware&#34;&gt;基于Vmware&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://pan.baidu.com/s/1mgAazK8&#34;&gt;VMware 11.1.1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://pan.baidu.com/s/1i3nLNXr&#34;&gt;Unlocker&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;基于virtualbox&#34;&gt;基于VirtualBox&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.virtualbox.org/wiki/Downloads&#34;&gt;VirtualBox&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;虚拟机环境配置&#34;&gt;虚拟机环境配置&lt;/h1&gt;
&lt;h2 id=&#34;配置vmware&#34;&gt;配置VMware&lt;/h2&gt;
&lt;h3 id=&#34;安装并激活vmware&#34;&gt;安装并激活VMware&lt;/h3&gt;
&lt;p&gt;首先自然是安装好VMware，然后是一串奇怪的字符序列：&lt;code&gt;1F04Z-6D111-7Z029-AV0Q4-3AEH8&lt;/code&gt;，我也不知道怎么用（&amp;gt;.&amp;lt;）。&lt;/p&gt;
&lt;h3 id=&#34;使用unlocker解锁vmware&#34;&gt;使用Unlocker解锁VMware&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;VMware Workstation并不支持Mac OS X的安装，只有VMware Fusion（也就是Mac平台上的VMware）才支持。于是有大神推出了这个解锁补丁，安装好这个补丁之后，VMware便可以支持OS X 的虚拟机安装。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下载并解压Unlocker，右击使用管理员权限打开&lt;code&gt;win-install.cmd&lt;/code&gt;，当任务执行完毕后，窗口会自动退出。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-unlocker.png&#34; alt=&#34;运行Unlocker&#34; /&gt;&lt;/p&gt;
&lt;p&gt;这时候再打开VMware，你将会看到&lt;code&gt;Apple Mac OX X&lt;/code&gt;的字样，说明你已经成功解锁了Mac OS X的安装功能。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-appear.png&#34; alt=&#34;可以选择Apple Mac OS X了&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;基于vmware配置mac-os-x虚拟机&#34;&gt;基于Vmware配置Mac OS X虚拟机&lt;/h2&gt;
&lt;h3 id=&#34;启动新建虚拟机向导&#34;&gt;启动新建虚拟机向导&lt;/h3&gt;
&lt;p&gt;没啥好说的，选择&lt;code&gt;典型&lt;/code&gt;。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-1.png&#34; alt=&#34;配置类型选择&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装客户机操作系统&#34;&gt;安装客户机操作系统&lt;/h3&gt;
&lt;p&gt;因为我们还需要一些特别的配置，所以这里我们选择&lt;code&gt;稍后安装操作系统&lt;/code&gt;。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-2.png&#34; alt=&#34;安装客户机操作系统&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;选择客户机操作系统&#34;&gt;选择客户机操作系统&lt;/h3&gt;
&lt;p&gt;这里我们选择&lt;code&gt;Apple Mac OS X&lt;/code&gt;，版本就选择最新的&lt;code&gt;OS X 10.10&lt;/code&gt;，其实这个版本对我们的安装没啥大的影响，主要是涉及到一些硬件兼容性的问题，无须在意。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-3.png&#34; alt=&#34;选择客户机操作系统&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;命名虚拟机&#34;&gt;命名虚拟机&lt;/h3&gt;
&lt;p&gt;在这里我们需要设定虚拟机的名称以及位置，这里就按照自己的喜好设定吧。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-4.png&#34; alt=&#34;命名虚拟机&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;指定磁盘容量&#34;&gt;指定磁盘容量&lt;/h3&gt;
&lt;p&gt;这里我们需要指定Mac虚拟机最大占用的空间大小，VMware推荐的是40G，如果空间够的话，可以设置的更大一些。然后下面的设置可以根据自己的喜好来，如果对性能比较注重，可以使用存储为单个文件的方式。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-5.png&#34; alt=&#34;指定磁盘容量&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;开始创建虚拟机&#34;&gt;开始创建虚拟机&lt;/h3&gt;
&lt;p&gt;到这里，Mac虚拟机的一些简单设置就已经全部完成了，点击完成，我们进入到下一个阶段。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-apple-6.png&#34; alt=&#34;开始创建虚拟机&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;虚拟机故障排除&#34;&gt;虚拟机故障排除&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;选择cdr镜像&lt;/strong&gt;
在新弹出的页面中选择&lt;code&gt;编辑虚拟机设置&lt;/code&gt;，然后点击&lt;code&gt;CD/DVD(SATA)&lt;/code&gt;
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-error-1.png&#34; alt=&#34;虚拟机设置&#34; /&gt;
选择&lt;code&gt;浏览&lt;/code&gt;，在弹出的&lt;code&gt;浏览ISO映像&lt;/code&gt;中，点击右下角的&lt;code&gt;CD-ROM 映像(.iso)&lt;/code&gt;，切换成&lt;code&gt;所有文件&lt;/code&gt;，然后就可以正常打开我们的cdr镜像了。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/vmware-error-2.png&#34; alt=&#34;切换所有文件&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修复无法正常引导&lt;/strong&gt;
即使前面的操作全部正确，我们依然无法正常启动我们的虚拟机。为了可以正常引导，我们还需要修改我们虚拟机的vmx文件。
进入我们之前设定的虚拟机位置，在文件夹中可以找到&lt;code&gt;xxxxx.vmx&lt;/code&gt;这样的文件，右击选择打开方式，使用记事本打开。在&lt;code&gt;smc.present = &amp;quot;TRUE&amp;quot;&lt;/code&gt;后面添加&lt;code&gt;smc.version = 0&lt;/code&gt;，保存之后退出，便可以解决。&lt;/p&gt;
&lt;h2 id=&#34;配置virtualbox&#34;&gt;配置VirtualBox&lt;/h2&gt;
&lt;h3 id=&#34;安装virtualbox&#34;&gt;安装VirtualBox&lt;/h3&gt;
&lt;p&gt;安装没有什么坑点，一路Next即可&lt;/p&gt;
&lt;h3 id=&#34;hack一下virtualbox&#34;&gt;Hack一下VirtualBox&lt;/h3&gt;
&lt;p&gt;VirtualBox原生支持Mac OS X的安装，但是只有在系统环境为Mac的环境下，才能正常引导，因为在非Mac环境下，安装程序会检测出我们的CPU不是已经识别的型号，从而拒绝进一步的安装。为此，我们需要执行以下命令来Hack：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;VBoxManage setextradata &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;yourvboxname&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;VBoxInternal/Devices/smc/0/Config/DeviceKey&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#4070a0&#34;&gt;&amp;#34;ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;如果VBoxManage没有被加入PATH的话，可能会提示VBoxManage不是可执行的命令。只需要进入VirtualBox的安装目录下&lt;code&gt;Shift+右键&lt;/code&gt;在当前目录打开命令行执行即可~&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;原理非常简单：利用VBox的命令行工具在虚拟机的DeviceKey中加入Apple的声明即可。理论上来讲，这应该是侵犯苹果权益的行为，所以请不要用于商业行为，后果自负~&lt;/p&gt;
&lt;h1 id=&#34;开始安装mac-os-x&#34;&gt;开始安装Mac OS X&lt;/h1&gt;
&lt;p&gt;经过如上配置之后，我们终于可以进入到Mac OS X的安装界面了~&lt;/p&gt;
&lt;h2 id=&#34;加载界面&#34;&gt;加载界面&lt;/h2&gt;
&lt;p&gt;首先附上酷炫的加载界面，我们什么都不用做，静静地等到它加载完成即可。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-1.png&#34; alt=&#34;加载界面&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;语言选择&#34;&gt;语言选择&lt;/h2&gt;
&lt;p&gt;然后是语言选择界面，选择自己喜欢的语言吧，不想折腾自己的话就老老实实简体中文吧~
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-2.png&#34; alt=&#34;语言选择&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;硬盘分区&#34;&gt;硬盘分区&lt;/h2&gt;
&lt;p&gt;安装之前，我们必须要对磁盘进行分区。首先我们点击安装界面最上方的&lt;code&gt;实用工具&lt;/code&gt;，然后选择&lt;code&gt;磁盘工具&lt;/code&gt;，进入分区管理界面。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-3.png&#34; alt=&#34;选择实用工具&#34; /&gt;
我们首先点击左侧列出的磁盘，然后在右侧选择&lt;code&gt;分区&lt;/code&gt;，空间也不大，选择一个分区即可。可以自己设定这个磁盘的名字，格式化类型默认即可，无需改动。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-4.png&#34; alt=&#34;选择分区&#34; /&gt;
配置完成后，我们点击左上角红色的叉叉退出磁盘工具，点击继续，开始我们的安装。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-5.png&#34; alt=&#34;正式开始安装&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;许可协议&#34;&gt;许可协议&lt;/h2&gt;
&lt;p&gt;作为一家有操守的大公司，该推的锅肯定是要推干净，于是有了这份许可协议。还有一个二次确认，如果拒绝，安装就结束了= =，不过反正是虚拟机，我们一路同意即可。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-6.png&#34; alt=&#34;阅读许可协议&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;选择安装磁盘&#34;&gt;选择安装磁盘&lt;/h2&gt;
&lt;p&gt;这里我们需要选择前面已经设定好的磁盘，选中之后点击继续即可。
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-7.png&#34; alt=&#34;选择安装磁盘&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;默默等待&#34;&gt;默默等待&lt;/h2&gt;
&lt;p&gt;然后就到了真正的安装过程了，这个过程中我们需要做的只有等待。出去溜达两圈，或者搓一把炉石？
&lt;img src=&#34;https://xuanwo.io/imgs/opinion/apple-install-8.png&#34; alt=&#34;等待安装完成&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;坑点总结&#34;&gt;坑点总结&lt;/h1&gt;
&lt;h2 id=&#34;使用dmg镜像提取&#34;&gt;使用DMG镜像提取&lt;/h2&gt;
&lt;p&gt;网上的教程大多是使用DMG镜像提取，需要用到UltraISO这款软件。但是不知道是否为版本差异还是我下载的镜像有问题，我每次试图提取出安装镜像的时候，都出现了进度超过100%，剩余时间为负的情况。尝试了大概四五个镜像以及多个UltraISO版本均宣告失败。&lt;/p&gt;
&lt;h2 id=&#34;vmx文件修改&#34;&gt;VMX文件修改&lt;/h2&gt;
&lt;p&gt;在VMX文件未修改的情况下，VMware无法正常加载相关的镜像，这也是一个非常恼人的坑点。所以在新建完虚拟机之后一定要记得修改VMX文件，当然也可以被坑了一次之后再来修改，233。&lt;/p&gt;
&lt;h1 id=&#34;更新日志&#34;&gt;更新日志&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;2015年08月09日 初步完成教程&lt;/li&gt;
&lt;li&gt;2015年10月31日 更换懒人包下载链接，请在页面上直接点击~&lt;/li&gt;
&lt;li&gt;2015年11月02日 加入了VirtualBox的相关配置&lt;/li&gt;
&lt;li&gt;2015年11月03日 修复了镜像链接错误，新增了10.11的懒人包镜像&lt;/li&gt;
&lt;li&gt;2015年11月09日 镜像下载地址被迅雷抓取了，流量持续血崩，更换为百度云&lt;/li&gt;
&lt;li&gt;2015年11月16日 据读者反馈10.11懒人包不可用，已移除&lt;/li&gt;
&lt;li&gt;2016年02月26日 由于博主系统已切换至Ununtu Gnome，缺乏进一步维护的条件，故本文不再更新，相关问题也不再进行回复，敬请谅解。&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>