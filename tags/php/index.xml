<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PHP on Xuanwo&#39;s Blog</title><link>https://xuanwo.io/tags/php/</link><description>Recent content in PHP on Xuanwo&#39;s Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Mon, 12 Oct 2015 16:53:25 +0000</lastBuildDate><atom:link href="https://xuanwo.io/tags/php/index.xml" rel="self" type="application/rss+xml"/><item><title>低成本搭建谷歌镜像</title><link>https://xuanwo.io/2015/10/12/7ghost-google/</link><pubDate>Mon, 12 Oct 2015 16:53:25 +0000</pubDate><guid>https://xuanwo.io/2015/10/12/7ghost-google/</guid><description>&lt;p&gt;尽管自己已经搭建好了Shadowsocks等翻墙工具，但是总有一些时刻需要临时地使用Google查看一些网页，这个时候一个可用的谷歌镜像就显得很重要。本文旨在使用低成本方案来搭建一个可用的谷歌镜像服务，用以部分解决这个问题。&lt;/p&gt;
&lt;h1 id=&#34;条件&#34;&gt;条件&lt;/h1&gt;
&lt;p&gt;你需要具备以下条件：
- 一台支持PHP的境外服务器（主机）
- 一个可用（未被墙）的域名&lt;/p&gt;
&lt;p&gt;如果没有的话，推荐使用&lt;a href=&#34;http://api.hostinger.com.hk/redir/6395538&#34;&gt;Hostinger&lt;/a&gt;的免费主机并注册免费一年的&lt;code&gt;.xyz&lt;/code&gt;域名。&lt;/p&gt;
&lt;h1 id=&#34;搭建&#34;&gt;搭建&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;以Hostinger为例&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;下载7ghost程序&lt;a href=&#34;https://drive.google.com/file/d/0B9QMnnRkfvWjMnhVdDVsb21qazA/view?usp=sharing&#34;&gt;(墙外，推荐)&lt;/a&gt;&amp;amp;&lt;a href=&#34;http://pan.baidu.com/s/1mgGkEYc&#34;&gt;(墙内，密码b5te)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;FTP上传至指定目录&lt;/li&gt;
&lt;li&gt;使用域名进行访问&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;配置&#34;&gt;配置&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;访问&lt;code&gt;http://yourname.xxx/_admin&lt;/code&gt;以进行管理&lt;/li&gt;
&lt;li&gt;默认密码为123456，可在&lt;code&gt;\_admin\data\config.php&lt;/code&gt;中自行修改&lt;/li&gt;
&lt;li&gt;在需要代理的网址中填写&lt;code&gt;https://www.google.com/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;点击提交即可&lt;/li&gt;
&lt;li&gt;现在可以访问自己的域名测试反代效果了&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;进阶&#34;&gt;进阶&lt;/h1&gt;
&lt;h2 id=&#34;使用cloudflare加速&#34;&gt;使用CloudFlare加速&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;登陆CloudFlare&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;add site&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后修改CloudFlare指定的NS服务器&lt;/li&gt;
&lt;li&gt;显示为&lt;code&gt;Actived&lt;/code&gt;之后即为配置完成&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;使用cloudflare的免费ssl&#34;&gt;使用CloudFlare的免费SSL&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;登陆CloudFlare&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;Crypto&lt;/code&gt;选项卡，SSL设置中选择&lt;code&gt;Flexible&lt;/code&gt;，等待几个小时后即可&lt;/li&gt;
&lt;li&gt;可以选择HSTS（必须保证SSL可用，否则将无法正常访问）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;开启全站强制https&#34;&gt;开启全站强制HTTPS&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;由于反代加上CDN的特殊性，所以无法通过修改.htaccess或者php文件来强制使用HTTPS。不过还是有办法的，可以使用CloudFlare的Page Rules功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;登陆CloudFlare&lt;/li&gt;
&lt;li&gt;切换到Page Rules选项卡&lt;/li&gt;
&lt;li&gt;在&lt;code&gt;Add new rule&lt;/code&gt;下方的&lt;code&gt;URL pattern&lt;/code&gt;中填写&lt;code&gt;http://yourname.xxx/*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;选中下方的&lt;code&gt;Always use https&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;Add rule&lt;/code&gt;即可&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;子目录配置&#34;&gt;子目录配置&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;这个是源程序中的一些BUG，好像也跟Google本身页面中的资源引用有关&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;假定子目录名为&lt;code&gt;sub&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;登录到管理后台&lt;/li&gt;
&lt;li&gt;添加内容替换，查找内容&lt;code&gt;sub/&lt;/code&gt;，替换为&lt;code&gt;/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;提交&lt;/code&gt;即可&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;注意事项&#34;&gt;注意事项&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;不建议大规模进行使用，可能会被Google屏蔽或者被GFW干扰&lt;/li&gt;
&lt;li&gt;建议使用垃圾域名，万一被BAN也不心疼的那种= =&lt;/li&gt;
&lt;li&gt;强烈建议花点时间配置HTTPS&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;更新日志&#34;&gt;更新日志&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;2015年10月13日 初步完成&lt;/li&gt;
&lt;li&gt;2015年11月05日 增加了修改密码的详细指示&lt;/li&gt;
&lt;li&gt;2015年11月29日 增加了子目录的配置&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>