<!doctype html><html><head><title>在Python中使用JSON</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content="Technology,Code,Program,Linux,"><meta name=author content="Xuanwo"><meta property="og:title" content="在Python中使用JSON"><meta property="og:description" content="A blog maintained by an interesting programmer."><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://xuanwo.io/2015/10/30/python-json/"><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://xuanwo.io/css/main.min.a285da0837b674a21742d9d9056c807cf8074d0e7b0cd2e85d30ed1ddf2acddd.css integrity="sha256-ooXaCDe2dKIXQtnZBWyAfPgHTQ57DNLoXTDtHd8qzd0="><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.61.0"></head><body><nav class=nav><div class=nav-container><div class=brand><a href=https://xuanwo.io>Xuanwo's Blog</a></div><div class=links><a class=main-nav-link href=/about/>关于我</a>
<a class=main-nav-link href=/posts/>文章</a></div></div></nav><main id=main-content><article class="single container"><header class=single-header><div class=flex><h1>在Python中使用JSON</h1><div class=post-meta><time class=date datetime=2015-10-30T23:47:23.000+00:00 itemprop=datePublished>2015-10-30</time>
/
<span><a href=#disqus_thread class=comment-link>Comments</a></span></div><div class=tag-container><a style=text-decoration:none href=https://xuanwo.io/tags/software><span>Software</span></a>
<a style=text-decoration:none href=https://xuanwo.io/tags/python><span>Python</span></a>
<a style=text-decoration:none href=https://xuanwo.io/tags/json><span>JSON</span></a></div></div></header><div class=post><h1 id=json>JSON介绍</h1><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。</p><p><em>引用自<a href=http://www.json.org/json-zh.html>json.org</a></em></p><h1 id=heading>语法</h1><h2 id=heading-1>结构</h2><p>JSON只提供了两种结构——字典和数组。也就是说，JSON可以存储一对一或者一对多的键值对关系。</p><h2 id=heading-2>形式</h2><h3 id=heading-3>对象</h3><p>对象是一个无序的键值对集合。
一个对象以<code>{</code>开始，<code>}</code>结束。每个<code>键</code>后跟一个<code>:</code>；键值对之间使用<code>,</code>分隔。
<img src=/imgs/develop/object.gif alt=object></p><h3 id=heading-4>数组</h3><p>数组是值的有序集合，一个键可以对应一个数组。
一个数组以<code>[</code>开始，<code>]</code>结束。值之间使用<code>,</code>分隔。
<img src=/imgs/develop/array.gif alt=array></p><h3 id=heading-5>值</h3><p>值可以是双引号括起来的字符串、数值、true、false、 null、对象或者数组。这些结构可以嵌套。
<img src=/imgs/develop/value.gif alt=value></p><h3 id=heading-6>字符串</h3><p>字符串是由双引号包围的任意数量Unicode字符的集合，使用反斜线转义。一个字符即一个单独的字符串。
字符串与C/C++中的字符串非常相似，包括常见的各种转义符号。
<img src=/imgs/develop/string.gif alt=value></p><h3 id=heading-7>数值</h3><p>数值与C/C++中的数值非常相似，但没有八进制和十六进制格式。
<img src=/imgs/develop/number.gif alt=number></p><h3 id=heading-8>空白</h3><p>空白符号（包括空格，Tab以及回车）可以加入到任何符号之间，不会影响JSON的含义</p><h1 id=pythonjson>Python中的JSON库</h1><p><em>以Python 3为基准</em></p><h2 id=heading-9>编码</h2><h3 id=heading-10>对应类型</h3><table><thead><tr><th>Python</th><th>JSON</th></tr></thead><tbody><tr><td>dict</td><td>object</td></tr><tr><td>list, tuple</td><td>array</td></tr><tr><td>str</td><td>string</td></tr><tr><td>int, float</td><td>number</td></tr><tr><td>True</td><td>true</td></tr><tr><td>False</td><td>false</td></tr><tr><td>None</td><td>null</td></tr></tbody></table><h3 id=heading-11>函数</h3><p>我们使用<code>JSON</code>库中的<code>dump</code>以及<code>dumps</code>函数来进行<code>JSON</code>编码。<code>dump</code>和<code>dumps</code>各项参数含义基本一致，唯一区别在于<code>dump</code>函数编码产生一个JSON文件流，而<code>dumps</code>编码产生一个JSON字符串。</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>json<span style=color:#666>.</span>dump(obj, fp, skipkeys<span style=color:#666>=</span>False, ensure_ascii<span style=color:#666>=</span>True, check_circular<span style=color:#666>=</span>True, allow_nan<span style=color:#666>=</span>True, cls<span style=color:#666>=</span>None, indent<span style=color:#666>=</span>None, separators<span style=color:#666>=</span>None, default<span style=color:#666>=</span>None, sort_keys<span style=color:#666>=</span>False, <span style=color:#666>*</span><span style=color:#666>*</span>kw)

json<span style=color:#666>.</span>dumps(obj, skipkeys<span style=color:#666>=</span>False, ensure_ascii<span style=color:#666>=</span>True, check_circular<span style=color:#666>=</span>True, allow_nan<span style=color:#666>=</span>True, cls<span style=color:#666>=</span>None, indent<span style=color:#666>=</span>None, separators<span style=color:#666>=</span>None, default<span style=color:#666>=</span>None, sort_keys<span style=color:#666>=</span>False, <span style=color:#666>*</span><span style=color:#666>*</span>kw)
</code></pre></div><ul><li><code>obj</code>：编码对象</li><li><code>fp</code>：指定文件流</li><li><code>skipkeys</code>：若skipkeys为真，则非标准类型将会跳过；否则返回<code>TypeError</code></li><li><code>ensure_ascii</code>：若<code>ensure_ascii</code>为真，则输出时将会确保没有非ASCII字符；否则将会原样输出</li><li><code>check_circular</code>：若<code>check_circular</code>为真，则将会检测是否存在循环调用；否则会跳过检测</li><li><code>allow_nan</code>：若<code>allow_nan</code>为真，则将会允许存在空值（无穷大值）；否则会返回<code>ValueError</code></li><li><code>cls</code>：若<code>cls</code>为空值，则使用<code>JSONEncoder</code>；否则使用指定子类进行编码</li><li><code>indent</code>：若<code>indent</code>为空值，则无缩进；否则使用指定值进行缩进</li><li><code>separators</code>：若<code>separators</code>为空值，则使用<code>(',', ': ')</code>分隔；否则使用指定的元组进行分隔</li><li><code>default</code>：若<code>default</code>为空值，则使用自带的<code>default</code>方法；否则使用指定值</li><li><code>sort_keys</code>：若<code>sort_keys</code>为真，则输出将会按照键进行排序</li></ul><h3 id=heading-12>示范</h3><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> <span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>json</span>

<span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> json<span style=color:#666>.</span>dumps([<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>foo</span><span style=color:#4070a0>&#39;</span>, {<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>bar</span><span style=color:#4070a0>&#39;</span>: (<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>baz</span><span style=color:#4070a0>&#39;</span>, None, <span style=color:#40a070>1.0</span>, <span style=color:#40a070>2</span>)}])
<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>[</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>foo</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>, {</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>bar</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>: [</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>baz</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>, null, 1.0, 2]}]</span><span style=color:#4070a0>&#39;</span>

<span style=color:#60a0b0;font-style:italic># 排序</span>
<span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> <span style=color:#007020;font-weight:700>print</span>(json<span style=color:#666>.</span>dumps({<span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>c</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>b</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>a</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>}, sort_keys<span style=color:#666>=</span>True))
{<span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>a</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>b</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>c</span><span style=color:#4070a0>&#34;</span>: <span style=color:#40a070>0</span>}

<span style=color:#60a0b0;font-style:italic># 分隔符</span>
<span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> json<span style=color:#666>.</span>dumps([<span style=color:#40a070>1</span>,<span style=color:#40a070>2</span>,<span style=color:#40a070>3</span>,{<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>4</span><span style=color:#4070a0>&#39;</span>: <span style=color:#40a070>5</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>6</span><span style=color:#4070a0>&#39;</span>: <span style=color:#40a070>7</span>}], separators<span style=color:#666>=</span>(<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>,</span><span style=color:#4070a0>&#39;</span>, <span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>:</span><span style=color:#4070a0>&#39;</span>))
<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>[1,2,3,{</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>4</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>:5,</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>6</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>:7}]</span><span style=color:#4070a0>&#39;</span>

<span style=color:#60a0b0;font-style:italic># Unicode输出</span>
<span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> json<span style=color:#666>.</span>dumps(<span style=color:#4070a0></span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0;font-weight:700>\u5317</span><span style=color:#4070a0;font-weight:700>\u4eac</span><span style=color:#4070a0>&#34;</span>, ensure_ascii<span style=color:#666>=</span>False)
<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>北京</span><span style=color:#4070a0>&#39;</span>
</code></pre></div><h2 id=heading-13>解码</h2><h3 id=heading-14>对应类型</h3><table><thead><tr><th>JSON</th><th>Python</th></tr></thead><tbody><tr><td>object</td><td>dict</td></tr><tr><td>array</td><td>list</td></tr><tr><td>string</td><td>str</td></tr><tr><td>number (int)</td><td>int</td></tr><tr><td>number (real)</td><td>float</td></tr><tr><td>true</td><td>True</td></tr><tr><td>false</td><td>False</td></tr><tr><td>null</td><td>None</td></tr></tbody></table><h3 id=heading-15>函数</h3><p>我们使用<code>JSON</code>库中的<code>load</code>以及<code>loads</code>函数来进行<code>JSON</code>解码。<code>load</code>和<code>loads</code>各项参数含义基本一致，唯一区别在于<code>load</code>函数用于解码JSON文件流，而<code>loads</code>用于解码JSON字符串。</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>json<span style=color:#666>.</span>load(fp, cls<span style=color:#666>=</span>None, object_hook<span style=color:#666>=</span>None, parse_float<span style=color:#666>=</span>None, parse_int<span style=color:#666>=</span>None, parse_constant<span style=color:#666>=</span>None, object_pairs_hook<span style=color:#666>=</span>None, <span style=color:#666>*</span><span style=color:#666>*</span>kw)

json<span style=color:#666>.</span>loads(s, encoding<span style=color:#666>=</span>None, cls<span style=color:#666>=</span>None, object_hook<span style=color:#666>=</span>None, parse_float<span style=color:#666>=</span>None, parse_int<span style=color:#666>=</span>None, parse_constant<span style=color:#666>=</span>None, object_pairs_hook<span style=color:#666>=</span>None, <span style=color:#666>*</span><span style=color:#666>*</span>kw)
</code></pre></div><ul><li><code>fp</code>：指定文件流</li><li><code>s</code>：指定字符串</li><li><code>encoding</code>：指定字符串编码</li><li><code>cls</code>：若<code>cls</code>为空值，则使用<code>JSONEncoder</code>；否则使用指定子类进行编码</li><li><code>object_hook</code>：若<code>object_hook</code>为空值，对象则返回解码器<code>dict</code>；否则使用自定义类型返回</li><li><code>parse_float</code>：若<code>parse_float</code>为空，则JSON浮点数转换为浮点数；否则转换为指定类型</li><li><code>parse_int</code>：若<code>parse_int</code>为空，则JSON整数转换为整数；否则转换为指定类型</li><li><code>parse_constant</code>若<code>parse_constant</code>为空，则不会处理非法输入；否则抛出异常</li><li><code>object_pairs_hook</code>：若<code>object_pairs_hook</code>为空值，则数组返回解码器<code>dict</code>；否则使用自定义类型返回</li></ul><h3 id=heading-16>示范</h3><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> <span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>json</span>

<span style=color:#666>&gt;&gt;</span><span style=color:#666>&gt;</span> json<span style=color:#666>.</span>loads(<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>[</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>foo</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>, {</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>bar</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>:[</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>baz</span><span style=color:#4070a0>&#34;</span><span style=color:#4070a0>, null, 1.0, 2]}]</span><span style=color:#4070a0>&#39;</span>)
[<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>foo</span><span style=color:#4070a0>&#39;</span>, {<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>bar</span><span style=color:#4070a0>&#39;</span>: [<span style=color:#4070a0></span><span style=color:#4070a0>&#39;</span><span style=color:#4070a0>baz</span><span style=color:#4070a0>&#39;</span>, None, <span style=color:#40a070>1.0</span>, <span style=color:#40a070>2</span>]}]
</code></pre></div><h1 id=heading-17>更新日志</h1><ul><li>2015年10月30日 初步完成</li></ul></div><div id=disqus_thread></div><script type=application/javascript>let disqus_config=function(){this.page.identifier='\/2015\/10\/30\/python-json\/';this.page.title='在Python中使用JSON';this.page.url='https:\/\/xuanwo.io\/2015\/10\/30\/python-json\/';};(function(){let d=document,s=d.createElement('script');s.async=true;s.src='//only0god.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class="footer container"><a class=main-nav-link href=/categories/>分类</a>
<a class=main-nav-link href=/tags/>标签</a>
<a class=main-nav-link href=/series/>专题</a>
<a class=main-nav-link href=/blogroll/>友链</a>
<a class=main-nav-link href=/index.xml>订阅</a>
<script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></footer></body></html>