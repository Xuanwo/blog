<!doctype html><html><head><title>在Python中使用JSON</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content=Technology,Code,Program,Linux,><meta name=author content=Xuanwo><meta property=og:title content=在Python中使用JSON><meta property=og:description content="A blog maintained by an interesting programmer."><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:url content=https://xuanwo.io/2015/10/30/python-json/><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/milligram@1.3.0/dist/milligram.min.css integrity="sha256-Ro/wP8uUi8LR71kwIdilf78atpu8bTEwrK5ZotZo+Zc=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.css><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.54.0"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;><svg width="1em" height="1em" viewBox="0 0 100 100"><use xlink:href="/svg/fontawesome.svg#bars"/></svg></a><a id=logo class=logo-text href=https://xuanwo.io>Xuanwo&#39;s Blog</a><nav id=main-nav><a class=main-nav-link href=/categories/>分类</a>
<a class=main-nav-link href=/tags/>标签</a>
<a class=main-nav-link href=/series/>专题</a>
<a class=main-nav-link href=/blogroll/>友链</a>
<a class=main-nav-link href=/index.xml>订阅</a>
<a class=main-nav-link href=/about/>关于我</a></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>在Python中使用JSON</h1></header><div class=article-meta><a href=/2015/10/30/python-json/ class=article-date><time datetime=2015-10-30T23:47:23.000&#43;00:00 itemprop=datePublished>2015-10-30</time></a><div class=post-categories><div class=article-category><a class=article-category-link href=https://xuanwo.io/categories/code>Code</a></div></div><div class=article-comment-link-wrap><a href=/2015/10/30/python-json/#disqus_thread class=article-comment-link>Comments</a></div></div><div class=article-entry itemprop=articleBody><h1 id=json介绍>JSON介绍</h1><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。</p><p><em>引用自<a href=http://www.json.org/json-zh.html>json.org</a></em></p><h1 id=语法>语法</h1><h2 id=结构>结构</h2><p>JSON只提供了两种结构——字典和数组。也就是说，JSON可以存储一对一或者一对多的键值对关系。</p><h2 id=形式>形式</h2><h3 id=对象>对象</h3><p>对象是一个无序的键值对集合。
一个对象以<code>{</code>开始，<code>}</code>结束。每个<code>键</code>后跟一个<code>:</code>；键值对之间使用<code>,</code>分隔。
<img src=/imgs/develop/object.gif alt=object></p><h3 id=数组>数组</h3><p>数组是值的有序集合，一个键可以对应一个数组。
一个数组以<code>[</code>开始，<code>]</code>结束。值之间使用<code>,</code>分隔。
<img src=/imgs/develop/array.gif alt=array></p><h3 id=值>值</h3><p>值可以是双引号括起来的字符串、数值、true、false、 null、对象或者数组。这些结构可以嵌套。
<img src=/imgs/develop/value.gif alt=value></p><h3 id=字符串>字符串</h3><p>字符串是由双引号包围的任意数量Unicode字符的集合，使用反斜线转义。一个字符即一个单独的字符串。
字符串与C/C++中的字符串非常相似，包括常见的各种转义符号。
<img src=/imgs/develop/string.gif alt=value></p><h3 id=数值>数值</h3><p>数值与C/C++中的数值非常相似，但没有八进制和十六进制格式。
<img src=/imgs/develop/number.gif alt=number></p><h3 id=空白>空白</h3><p>空白符号（包括空格，Tab以及回车）可以加入到任何符号之间，不会影响JSON的含义</p><h1 id=python中的json库>Python中的JSON库</h1><p><em>以Python 3为基准</em></p><h2 id=编码>编码</h2><h3 id=对应类型>对应类型</h3><p>Python | JSON
&ndash;|&ndash;
dict | object
list, tuple | array
str| string
int, float| number
True | true
False | false
None | null</p><h3 id=函数>函数</h3><p>我们使用<code>JSON</code>库中的<code>dump</code>以及<code>dumps</code>函数来进行<code>JSON</code>编码。<code>dump</code>和<code>dumps</code>各项参数含义基本一致，唯一区别在于<code>dump</code>函数编码产生一个JSON文件流，而<code>dumps</code>编码产生一个JSON字符串。</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>json<span style=color:#666>.</span>dump(obj, fp, skipkeys<span style=color:#666>=</span>False, ensure_ascii<span style=color:#666>=</span>True, check_circular<span style=color:#666>=</span>True, allow_nan<span style=color:#666>=</span>True, cls<span style=color:#666>=</span>None, indent<span style=color:#666>=</span>None, separators<span style=color:#666>=</span>None, default<span style=color:#666>=</span>None, sort_keys<span style=color:#666>=</span>False, <span style=color:#666>**</span>kw)

json<span style=color:#666>.</span>dumps(obj, skipkeys<span style=color:#666>=</span>False, ensure_ascii<span style=color:#666>=</span>True, check_circular<span style=color:#666>=</span>True, allow_nan<span style=color:#666>=</span>True, cls<span style=color:#666>=</span>None, indent<span style=color:#666>=</span>None, separators<span style=color:#666>=</span>None, default<span style=color:#666>=</span>None, sort_keys<span style=color:#666>=</span>False, <span style=color:#666>**</span>kw)</code></pre></div><ul><li><code>obj</code>：编码对象</li><li><code>fp</code>：指定文件流</li><li><code>skipkeys</code>：若skipkeys为真，则非标准类型将会跳过；否则返回<code>TypeError</code></li><li><code>ensure_ascii</code>：若<code>ensure_ascii</code>为真，则输出时将会确保没有非ASCII字符；否则将会原样输出</li><li><code>check_circular</code>：若<code>check_circular</code>为真，则将会检测是否存在循环调用；否则会跳过检测</li><li><code>allow_nan</code>：若<code>allow_nan</code>为真，则将会允许存在空值（无穷大值）；否则会返回<code>ValueError</code></li><li><code>cls</code>：若<code>cls</code>为空值，则使用<code>JSONEncoder</code>；否则使用指定子类进行编码</li><li><code>indent</code>：若<code>indent</code>为空值，则无缩进；否则使用指定值进行缩进</li><li><code>separators</code>：若<code>separators</code>为空值，则使用<code>(',', ': ')</code>分隔；否则使用指定的元组进行分隔</li><li><code>default</code>：若<code>default</code>为空值，则使用自带的<code>default</code>方法；否则使用指定值</li><li><code>sort_keys</code>：若<code>sort_keys</code>为真，则输出将会按照键进行排序</li></ul><h3 id=示范>示范</h3><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#666>&gt;&gt;&gt;</span> <span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>json</span>

<span style=color:#666>&gt;&gt;&gt;</span> json<span style=color:#666>.</span>dumps([<span style=color:#4070a0>&#39;foo&#39;</span>, {<span style=color:#4070a0>&#39;bar&#39;</span>: (<span style=color:#4070a0>&#39;baz&#39;</span>, None, <span style=color:#40a070>1.0</span>, <span style=color:#40a070>2</span>)}])
<span style=color:#4070a0>&#39;[&#34;foo&#34;, {&#34;bar&#34;: [&#34;baz&#34;, null, 1.0, 2]}]&#39;</span>

<span style=color:#60a0b0;font-style:italic># 排序</span>
<span style=color:#666>&gt;&gt;&gt;</span> <span style=color:#007020;font-weight:700>print</span>(json<span style=color:#666>.</span>dumps({<span style=color:#4070a0>&#34;c&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0>&#34;b&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0>&#34;a&#34;</span>: <span style=color:#40a070>0</span>}, sort_keys<span style=color:#666>=</span>True))
{<span style=color:#4070a0>&#34;a&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0>&#34;b&#34;</span>: <span style=color:#40a070>0</span>, <span style=color:#4070a0>&#34;c&#34;</span>: <span style=color:#40a070>0</span>}

<span style=color:#60a0b0;font-style:italic># 分隔符</span>
<span style=color:#666>&gt;&gt;&gt;</span> json<span style=color:#666>.</span>dumps([<span style=color:#40a070>1</span>,<span style=color:#40a070>2</span>,<span style=color:#40a070>3</span>,{<span style=color:#4070a0>&#39;4&#39;</span>: <span style=color:#40a070>5</span>, <span style=color:#4070a0>&#39;6&#39;</span>: <span style=color:#40a070>7</span>}], separators<span style=color:#666>=</span>(<span style=color:#4070a0>&#39;,&#39;</span>, <span style=color:#4070a0>&#39;:&#39;</span>))
<span style=color:#4070a0>&#39;[1,2,3,{&#34;4&#34;:5,&#34;6&#34;:7}]&#39;</span>

<span style=color:#60a0b0;font-style:italic># Unicode输出</span>
<span style=color:#666>&gt;&gt;&gt;</span> json<span style=color:#666>.</span>dumps(<span style=color:#4070a0>&#34;</span><span style=color:#4070a0;font-weight:700>\u5317\u4eac</span><span style=color:#4070a0>&#34;</span>, ensure_ascii<span style=color:#666>=</span>False)
<span style=color:#4070a0>&#39;北京&#39;</span></code></pre></div><h2 id=解码>解码</h2><h3 id=对应类型-1>对应类型</h3><p>JSON | Python
&ndash; | &ndash;
object | dict
array | list
string | str
number (int) | int
number (real) | float
true | True
false | False
null | None</p><h3 id=函数-1>函数</h3><p>我们使用<code>JSON</code>库中的<code>load</code>以及<code>loads</code>函数来进行<code>JSON</code>解码。<code>load</code>和<code>loads</code>各项参数含义基本一致，唯一区别在于<code>load</code>函数用于解码JSON文件流，而<code>loads</code>用于解码JSON字符串。</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>json<span style=color:#666>.</span>load(fp, cls<span style=color:#666>=</span>None, object_hook<span style=color:#666>=</span>None, parse_float<span style=color:#666>=</span>None, parse_int<span style=color:#666>=</span>None, parse_constant<span style=color:#666>=</span>None, object_pairs_hook<span style=color:#666>=</span>None, <span style=color:#666>**</span>kw)

json<span style=color:#666>.</span>loads(s, encoding<span style=color:#666>=</span>None, cls<span style=color:#666>=</span>None, object_hook<span style=color:#666>=</span>None, parse_float<span style=color:#666>=</span>None, parse_int<span style=color:#666>=</span>None, parse_constant<span style=color:#666>=</span>None, object_pairs_hook<span style=color:#666>=</span>None, <span style=color:#666>**</span>kw)</code></pre></div><ul><li><code>fp</code>：指定文件流</li><li><code>s</code>：指定字符串</li><li><code>encoding</code>：指定字符串编码</li><li><code>cls</code>：若<code>cls</code>为空值，则使用<code>JSONEncoder</code>；否则使用指定子类进行编码</li><li><code>object_hook</code>：若<code>object_hook</code>为空值，对象则返回解码器<code>dict</code>；否则使用自定义类型返回</li><li><code>parse_float</code>：若<code>parse_float</code>为空，则JSON浮点数转换为浮点数；否则转换为指定类型</li><li><code>parse_int</code>：若<code>parse_int</code>为空，则JSON整数转换为整数；否则转换为指定类型</li><li><code>parse_constant</code>若<code>parse_constant</code>为空，则不会处理非法输入；否则抛出异常</li><li><code>object_pairs_hook</code>：若<code>object_pairs_hook</code>为空值，则数组返回解码器<code>dict</code>；否则使用自定义类型返回</li></ul><h3 id=示范-1>示范</h3><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#666>&gt;&gt;&gt;</span> <span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>json</span>

<span style=color:#666>&gt;&gt;&gt;</span> json<span style=color:#666>.</span>loads(<span style=color:#4070a0>&#39;[&#34;foo&#34;, {&#34;bar&#34;:[&#34;baz&#34;, null, 1.0, 2]}]&#39;</span>)
[<span style=color:#4070a0>&#39;foo&#39;</span>, {<span style=color:#4070a0>&#39;bar&#39;</span>: [<span style=color:#4070a0>&#39;baz&#39;</span>, None, <span style=color:#40a070>1.0</span>, <span style=color:#40a070>2</span>]}]</code></pre></div><h1 id=更新日志>更新日志</h1><ul><li>2015年10月30日 初步完成</li></ul></div><div class=article-toc></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/software>Software</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/python>Python</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/json>JSON</a></li></ul></footer></div><nav id=article-nav><a href=/2015/11/03/python-packages/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
Python包分发详解</div></a><a href=/2015/10/29/regex/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>正则表达式参考手册&nbsp;<span>&gt;</span></div></a></nav></article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){this.page.identifier='\/2015\/10\/30\/python-json\/';this.page.title='在Python中使用JSON';this.page.url='https:\/\/xuanwo.io\/2015\/10\/30\/python-json\/';};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"only0god"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2019 Xuanwo&#39;s Blog&nbsp;
Powered by <a href=https://gohugo.io target=_blank>Hugo</a></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js></script><script>tocbot.init({tocSelector:'.article-toc',contentSelector:'.article-entry',headingSelector:'h1, h2, h3, h4, h5',});</script><script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var header=document.getElementById('header');if(header.classList.contains('mobile-on')){header.classList.remove('mobile-on');}else{header.classList.add('mobile-on');}});</script></footer></div></body></html>