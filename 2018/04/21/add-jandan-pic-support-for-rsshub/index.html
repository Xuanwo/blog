<!doctype html><html><head><title>为 RSSHub 增加煎蛋无聊图支持</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content=Technology,Code,Program,Linux,><meta name=author content=Xuanwo><meta property=og:title content="为 RSSHub 增加煎蛋无聊图支持"><meta property=og:description content="A blog maintained by an interesting programmer."><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:url content=https://xuanwo.io/2018/04/21/add-jandan-pic-support-for-rsshub/><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/milligram@1.3.0/dist/milligram.min.css integrity="sha256-Ro/wP8uUi8LR71kwIdilf78atpu8bTEwrK5ZotZo+Zc=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.css><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.55.6"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;><svg width="1em" height="1em" viewBox="0 0 100 100"><use xlink:href="/svg/fontawesome.svg#bars"/></svg></a><a id=logo class=logo-text href=https://xuanwo.io>Xuanwo&#39;s Blog</a><nav id=main-nav><a class=main-nav-link href=/categories/>分类</a>
<a class=main-nav-link href=/tags/>标签</a>
<a class=main-nav-link href=/series/>专题</a>
<a class=main-nav-link href=/blogroll/>友链</a>
<a class=main-nav-link href=/index.xml>订阅</a>
<a class=main-nav-link href=/about/>关于我</a></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>为 RSSHub 增加煎蛋无聊图支持</h1></header><div class=article-meta><a href=/2018/04/21/add-jandan-pic-support-for-rsshub/ class=article-date><time datetime=2018-04-21T07:30:00.000&#43;00:00 itemprop=datePublished>2018-04-21</time></a><div class=post-categories><div class=article-category><a class=article-category-link href=https://xuanwo.io/categories/code>Code</a></div></div><div class=article-comment-link-wrap><a href=/2018/04/21/add-jandan-pic-support-for-rsshub/#disqus_thread class=article-comment-link>Comments</a></div></div><div class=article-entry itemprop=articleBody><p><a href=https://github.com/DIYgod/RSSHub>RSSHub</a> 是 <a href=https://diygod.me/>@DIYgod</a> 开发的一个项目，其目标是：“使用 RSS 连接全世界”，实现的方式是抓取某个网页或者 API 后解析数据并生成符合标准的 RSS Feed。这个项目十分有意思，可以通过 RSS 去订阅 B 站的番剧或者网易云音乐的歌单，比如我最近正在追的一部动漫：<a href=https://rss.now.sh/bilibili/bangumi/21680>DARLING in the FRANXX</a>。我最近为这个项目增加了煎蛋无聊图的支持，这篇文章主要就是讲一讲如何抓取并解析煎蛋无聊图。</p><h2 id=准备工作>准备工作</h2><p>先了解一下 RSSHub 这个项目的大概构成。RSSHub 基于 <a href=http://koajs.com/>Koa</a> 开发，请求进来之后就会被直接路由到对应的模块，然后每个模块中实现自己的逻辑。如果想增加新的支持，只需要修改 <code>router.js</code> 并在 <code>routes</code> 目录中增加对应的模块就可以了。项目中主要使用 <a href=https://github.com/axios/axios>axios</a> 来做异步请求，使用 <a href=https://aui.github.io/art-template/>art-template</a> 来渲染 RSS Feed 的模板，使用 <a href=https://cheerio.js.org/>cheerio</a> 来解析 HTML。其中 axios 和 art-template 使用起来都比较简单，只要模仿其它模块的写法就行了，只有 cheerio 对不怎么熟悉 jQuery 语法的同学来说会比较麻烦一些（对，就是我），需要花一些时间了解一下如何获取自己需要的内容。</p><h2 id=抓取无聊图>抓取无聊图</h2><p>煎蛋网作为常年被爬的目标，早就已经练就了一身反爬虫的骚操作。在我写这篇文章的时候，煎蛋的反爬策略是这样的：在每个 comment 当中返回一个 <code>img-hash</code>，同时会生成一个不定期会变的 magic string，在脚本中使用这两个值算出真正的图片链接，再操作 DOM 把 img 标签塞进去。</p><p>举个例子吧，会有这样的一个 comment（已经去掉了无关的一些元素）：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#062873;font-weight:700>li</span> <span style=color:#4070a0>id</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;comment-3784888&#34;</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>div</span>&gt;
    &lt;<span style=color:#062873;font-weight:700>div</span> <span style=color:#4070a0>class</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;row&#34;</span>&gt;
      &lt;<span style=color:#062873;font-weight:700>div</span> <span style=color:#4070a0>class</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;text&#34;</span>&gt;&lt;<span style=color:#062873;font-weight:700>span</span> <span style=color:#4070a0>class</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;righttext&#34;</span>&gt;&lt;<span style=color:#062873;font-weight:700>a</span> <span style=color:#4070a0>href</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;//jandan.net/pic/page-226#comment-3784888&#34;</span>&gt;3784888&lt;/<span style=color:#062873;font-weight:700>a</span>&gt;&lt;/<span style=color:#062873;font-weight:700>span</span>&gt;
        &lt;<span style=color:#062873;font-weight:700>p</span>&gt;辣个屁&lt;<span style=color:#062873;font-weight:700>br</span> /&gt;
          &lt;<span style=color:#062873;font-weight:700>img</span> <span style=color:#4070a0>src</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;//img.jandan.net/img/blank.gif&#34;</span> <span style=color:#4070a0>onload</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;jandan_load_img(this)&#34;</span> /&gt;&lt;<span style=color:#062873;font-weight:700>span</span> <span style=color:#4070a0>class</span><span style=color:#666>=</span><span style=color:#4070a0>&#34;img-hash&#34;</span>&gt;80e6w5mrZ3HEpVzkZXyOhd9DYgF9F2cXvgMQ6PPgofGuHui2Dqrhh9fDcWrRGQEtB7l+GKuPqhQCGsHil1luTUVYNEpXiKUzh3ck/P91sr6ht9gsISFBXQ&lt;/<span style=color:#062873;font-weight:700>span</span>&gt;&lt;/<span style=color:#062873;font-weight:700>p</span>&gt;
      &lt;/<span style=color:#062873;font-weight:700>div</span>&gt;
    &lt;/<span style=color:#062873;font-weight:700>div</span>&gt;
  &lt;/<span style=color:#062873;font-weight:700>div</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>li</span>&gt;</code></pre></div><p>可以看到 img 标签中载入的是 <code>img.jandan.net/img/blank.gif</code>，然后在加载的时候会去执行 <code>jandan_load_img</code>。让我们来看一下 <code>jandan_load_img</code> 这个函数都做了什么：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>function</span> jandan_load_img(b) {
	<span style=color:#007020;font-weight:700>var</span> d <span style=color:#666>=</span> $(b);
	<span style=color:#007020;font-weight:700>var</span> f <span style=color:#666>=</span> d.next(<span style=color:#4070a0>&#34;span.img-hash&#34;</span>);
	<span style=color:#007020;font-weight:700>var</span> e <span style=color:#666>=</span> f.text();
	f.remove();
	<span style=color:#007020;font-weight:700>var</span> c <span style=color:#666>=</span> jdTzcXZnL0V2WZZ8eq9786xeOdkyoBXlDR(e, <span style=color:#4070a0>&#34;tRoGWVi9aW3cMYuqXmV9S1SweVfNzJf3&#34;</span>);
	<span style=color:#007020;font-weight:700>var</span> a <span style=color:#666>=</span> $(<span style=color:#4070a0>&#39;&lt;a href=&#34;&#39;</span> <span style=color:#666>+</span> c.replace(<span style=color:#235388>/(\/\/\w+\.sinaimg\.cn\/)(\w+)(\/.+\.(gif|jpg|jpeg))/</span>, <span style=color:#4070a0>&#34;$1large$3&#34;</span>) <span style=color:#666>+</span> <span style=color:#4070a0>&#39;&#34; target=&#34;_blank&#34; class=&#34;view_img_link&#34;&gt;[查看原图]&lt;/a&gt;&#39;</span>);
	d.before(a);
	d.before(<span style=color:#4070a0>&#34;&lt;br&gt;&#34;</span>);
	d.removeAttr(<span style=color:#4070a0>&#34;onload&#34;</span>);
	d.attr(<span style=color:#4070a0>&#34;src&#34;</span>, location.protocol <span style=color:#666>+</span> c.replace(<span style=color:#235388>/(\/\/\w+\.sinaimg\.cn\/)(\w+)(\/.+\.gif)/</span>, <span style=color:#4070a0>&#34;$1thumb180$3&#34;</span>));
	<span style=color:#007020;font-weight:700>if</span> (<span style=color:#235388>/\.gif$/</span>.test(c)) {
		d.attr(<span style=color:#4070a0>&#34;org_src&#34;</span>, location.protocol <span style=color:#666>+</span> c);
		b.onload <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>function</span>() {
			add_img_loading_mask(<span style=color:#007020;font-weight:700>this</span>, load_sina_gif)
		}
	}
}
</code></pre></div><p>抛开跟我们抓取无关的 DOM 操作，很容易发现这个函数实际上就是做了一次 <code>jandan_decode(img_hash, magic_string);</code>。接下来我们只要搞清楚这里的 <code>jdTzcXZnL0V2WZZ8eq9786xeOdkyoBXlDR</code> 函数是什么可以了，用 ES6 的语法简单的翻译一下就是下面这样：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>const</span> jandan_decode <span style=color:#666>=</span> (m, r) =&gt; {
    <span style=color:#007020;font-weight:700>let</span> q <span style=color:#666>=</span> <span style=color:#40a070>4</span>;
    r <span style=color:#666>=</span> md5(r);
    <span style=color:#007020;font-weight:700>let</span> o <span style=color:#666>=</span> md5(r.substr(<span style=color:#40a070>0</span>, <span style=color:#40a070>16</span>));
    <span style=color:#007020;font-weight:700>let</span> n <span style=color:#666>=</span> md5(r.substr(<span style=color:#40a070>16</span>, <span style=color:#40a070>16</span>));
    <span style=color:#007020;font-weight:700>let</span> l <span style=color:#666>=</span> m.substr(<span style=color:#40a070>0</span>, q);
    <span style=color:#007020;font-weight:700>let</span> c <span style=color:#666>=</span> o <span style=color:#666>+</span> md5(o <span style=color:#666>+</span> l);
    <span style=color:#007020;font-weight:700>let</span> k;
    m <span style=color:#666>=</span> m.substr(q);
    k <span style=color:#666>=</span> base64_decode(m);

    <span style=color:#007020;font-weight:700>const</span> h <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>new</span> <span style=color:#007020>Array</span>(<span style=color:#40a070>256</span>);
    <span style=color:#007020;font-weight:700>for</span> (<span style=color:#007020;font-weight:700>let</span> g <span style=color:#666>=</span> <span style=color:#40a070>0</span>; g <span style=color:#666>&lt;</span> <span style=color:#40a070>256</span>; g<span style=color:#666>++</span>) {
        h[g] <span style=color:#666>=</span> g;
    }
    <span style=color:#007020;font-weight:700>const</span> b <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>new</span> <span style=color:#007020>Array</span>(<span style=color:#40a070>256</span>);
    <span style=color:#007020;font-weight:700>for</span> (<span style=color:#007020;font-weight:700>let</span> g <span style=color:#666>=</span> <span style=color:#40a070>0</span>; g <span style=color:#666>&lt;</span> <span style=color:#40a070>256</span>; g<span style=color:#666>++</span>) {
        b[g] <span style=color:#666>=</span> c.charCodeAt(g <span style=color:#666>%</span> c.length);
    }
    <span style=color:#007020;font-weight:700>for</span> (<span style=color:#007020;font-weight:700>let</span> f <span style=color:#666>=</span> <span style=color:#40a070>0</span>, g <span style=color:#666>=</span> <span style=color:#40a070>0</span>; g <span style=color:#666>&lt;</span> <span style=color:#40a070>256</span>; g<span style=color:#666>++</span>) {
        f <span style=color:#666>=</span> (f <span style=color:#666>+</span> h[g] <span style=color:#666>+</span> b[g]) <span style=color:#666>%</span> <span style=color:#40a070>256</span>;
        [h[g], h[f]] <span style=color:#666>=</span> [h[f], h[g]];
    }

    <span style=color:#007020;font-weight:700>let</span> t <span style=color:#666>=</span> <span style=color:#4070a0>&#39;&#39;</span>;
    k <span style=color:#666>=</span> k.split(<span style=color:#4070a0>&#39;&#39;</span>);
    <span style=color:#007020;font-weight:700>for</span> (<span style=color:#007020;font-weight:700>let</span> p <span style=color:#666>=</span> <span style=color:#40a070>0</span>, f <span style=color:#666>=</span> <span style=color:#40a070>0</span>, g <span style=color:#666>=</span> <span style=color:#40a070>0</span>; g <span style=color:#666>&lt;</span> k.length; g<span style=color:#666>++</span>) {
        p <span style=color:#666>=</span> (p <span style=color:#666>+</span> <span style=color:#40a070>1</span>) <span style=color:#666>%</span> <span style=color:#40a070>256</span>;
        f <span style=color:#666>=</span> (f <span style=color:#666>+</span> h[p]) <span style=color:#666>%</span> <span style=color:#40a070>256</span>;
        [h[p], h[f]] <span style=color:#666>=</span> [h[f], h[p]];
        t <span style=color:#666>+=</span> chr(ord(k[g]) <span style=color:#666>^</span> h[(h[p] <span style=color:#666>+</span> h[f]) <span style=color:#666>%</span> <span style=color:#40a070>256</span>]);
    }
    <span style=color:#007020;font-weight:700>if</span> ((t.substr(<span style=color:#40a070>0</span>, <span style=color:#40a070>10</span>) <span style=color:#666>==</span> <span style=color:#40a070>0</span> <span style=color:#666>||</span> t.substr(<span style=color:#40a070>0</span>, <span style=color:#40a070>10</span>) <span style=color:#666>-</span> time() <span style=color:#666>&gt;</span> <span style=color:#40a070>0</span>) <span style=color:#666>&amp;&amp;</span> t.substr(<span style=color:#40a070>10</span>, <span style=color:#40a070>16</span>) <span style=color:#666>==</span> md5(t.substr(<span style=color:#40a070>26</span>) <span style=color:#666>+</span> n).substr(<span style=color:#40a070>0</span>, <span style=color:#40a070>16</span>)) {
        t <span style=color:#666>=</span> t.substr(<span style=color:#40a070>26</span>);
    }
    <span style=color:#007020;font-weight:700>return</span> t;
};
</code></pre></div><p>我们并不需要理解这个函数都做了什么，只需要保证我们自己实现的 <code>jandan_decode</code> 能够跟 <code>jdTzcXZnL0V2WZZ8eq9786xeOdkyoBXlDR</code> 函数等价。</p><p>到这里，我们已经可以拿到原图了，接下来只需要按照 RSSHub 的要求填充模板即可。</p><h2 id=踩过的坑>踩过的坑</h2><h3 id=会变的-magic-string>会变的 magic string</h3><p>一开始以为 magic string 是一个常量，结果睡了一觉之后起床发现昨晚写好的代码不 work 了。查看了一下代码之后发现是煎蛋会不定期的就改这个 magic string 的值，所以我们需要下载最新的 js 文件，并获取写死在里面的那个 magic string。</p><p>实现的原理也非常简单，首先加载页面，找到最新的 js 文件：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>let</span> script_url <span style=color:#666>=</span> <span style=color:#4070a0>&#39;&#39;</span>;
$(<span style=color:#4070a0>&#39;script&#39;</span>).each((index, item) =&gt; {
		<span style=color:#007020;font-weight:700>let</span> s <span style=color:#666>=</span> $(item).attr(<span style=color:#4070a0>&#39;src&#39;</span>);
		<span style=color:#007020;font-weight:700>if</span> (s <span style=color:#666>&amp;&amp;</span> s.startsWith(<span style=color:#4070a0>&#39;//cdn.jandan.net/static/min/&#39;</span>)) {
				script_url <span style=color:#666>=</span> s;
		}
});
</code></pre></div><p>然后下载这个 js 文件并使用正则找出里面的 magic string：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>const</span> jandan_magic <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>async</span> (url) =&gt; {
    <span style=color:#007020;font-weight:700>const</span> script <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>await</span> axios({
        method<span style=color:#666>:</span> <span style=color:#4070a0>&#39;get&#39;</span>,
        url<span style=color:#666>:</span> <span style=color:#4070a0>&#39;http:&#39;</span> <span style=color:#666>+</span> url,
        headers<span style=color:#666>:</span> {
            <span style=color:#4070a0>&#39;User-Agent&#39;</span><span style=color:#666>:</span> config.ua,
            <span style=color:#4070a0>&#39;Referer&#39;</span><span style=color:#666>:</span> <span style=color:#4070a0>&#39;http://jandan.net&#39;</span>
        }
    });
    <span style=color:#007020;font-weight:700>const</span> regex <span style=color:#666>=</span> <span style=color:#235388>/e,&#34;([a-zA-Z0-9]{32})&#34;/</span>;
    <span style=color:#007020;font-weight:700>return</span> script.data.match(regex)[<span style=color:#40a070>1</span>];
};
</code></pre></div><h3 id=windows-atob-的实现>windows.atob 的实现</h3><p>这个坑踩了很久。</p><p>最开始写好了 <code>jandan_decode</code> 之后发现结果始终是乱码，但是在浏览器端运行的时候却是正常的。这说明逻辑没有问题，但是引用的一些方法可能因为环境差异出了。经过反复的调试之后定位到问题出现在 <code>base64_decode</code> 这个函数：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>const</span> base64_decode <span style=color:#666>=</span> (i) =&gt; <span style=color:#007020;font-weight:700>new</span> Buffer(i, <span style=color:#4070a0>&#39;base64&#39;</span>).toString();
</code></pre></div><p>煎蛋的浏览器端实现是这样的：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#007020;font-weight:700>function</span> base64_decode(a) {
  <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020>window</span>.atob(a)
}
</code></pre></div><p>一开始不明白问题出在哪里，直到看到了一个 <a href=https://gist.github.com/jmshal/b14199f7402c8f3a4568733d8bed0f25>Node.js 的 windows.atob polyfill</a>：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>module.exports <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>function</span> atob(a) {
    <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020;font-weight:700>new</span> Buffer(a, <span style=color:#4070a0>&#39;base64&#39;</span>).toString(<span style=color:#4070a0>&#39;binary&#39;</span>);
};
</code></pre></div><p>原来 Buffer 的 toString 函数默认采用的编码是 <code>utf-8</code> 但是浏览器端的 <code>atob</code> 使用的编码却是 <code>binary</code>。</p><h2 id=总结>总结</h2><ul><li>多年过去了，我的 Node.js 还是一如既往的半吊子，只能借着别人写的项目蹭蹭贡献才能混下去这样子的。</li><li>目前<a href=https://github.com/DIYgod/RSSHub/commit/2b91689bd57f83987f10058f7fd6e0e17d328f2d>这个实现</a>已经被合并到了 Master 分支，大家可以订阅煎蛋无聊图的 Feed 啦~</li></ul><h2 id=动态>动态</h2><ul><li>最近重新开始看猫腻的《间客》，写得真好，看的时候感觉自己也跟许乐一样，永远牛逼，永远正义，永远是那个来自东林的三有青年。</li></ul></div><div class=article-toc></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/node.js>Node.js</a></li></ul></footer></div><nav id=article-nav><a href=/2018/05/01/xuanzang-intro/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
Xuanzang —— 一款开箱即用的全文搜索引擎</div></a><a href=/2018/04/15/reference-and-copy-in-python/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>Python 中的引用与拷贝&nbsp;<span>&gt;</span></div></a></nav></article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){this.page.identifier='\/2018\/04\/21\/add-jandan-pic-support-for-rsshub\/';this.page.title='为 RSSHub 增加煎蛋无聊图支持';this.page.url='https:\/\/xuanwo.io\/2018\/04\/21\/add-jandan-pic-support-for-rsshub\/';};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"only0god"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2019 Xuanwo&#39;s Blog&nbsp;
Powered by <a href=https://gohugo.io target=_blank>Hugo</a></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js></script><script>tocbot.init({tocSelector:'.article-toc',contentSelector:'.article-entry',headingSelector:'h1, h2, h3, h4, h5',});</script><script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var header=document.getElementById('header');if(header.classList.contains('mobile-on')){header.classList.remove('mobile-on');}else{header.classList.add('mobile-on');}});</script></footer></div></body></html>