<!doctype html><html><head><title>Hugo RSS 配置输出全文</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content="Technology,Code,Program,Linux,"><meta name=author content="Xuanwo"><meta property="og:title" content="Hugo RSS 配置输出全文"><meta property="og:description" content="A blog maintained by an interesting programmer."><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://xuanwo.io/2018/04/08/hugo-rss-output-all-content/"><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://xuanwo.io/css/main.min.5a9ffcf343273240b691845bba645faa19f2008c05742711b684042a3063818b.css integrity="sha256-Wp/880MnMkC2kYRbumRfqhnyAIwFdCcRtoQEKjBjgYs="><script data-ad-client=ca-pub-8380875817494486 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.68.3"></head><body><nav class=nav><div class=nav-container><div class=brand><a href=https://xuanwo.io>Xuanwo's Blog</a></div><div class=links><a class=main-nav-link href=/about/>About</a>
<a class=main-nav-link href=/posts/>Posts</a></div></div></nav><main id=main-content><article class="single container"><header class=single-header><div class=flex><h1>Hugo RSS 配置输出全文</h1><div class=post-meta><time class=date datetime=2018-04-08T16:07:00.000+00:00 itemprop=datePublished>2018-04-08</time></div><div class=tag-container><a style=text-decoration:none href=https://xuanwo.io/tags/hugo><span>Hugo</span></a>
<a style=text-decoration:none href=https://xuanwo.io/tags/blog><span>Blog</span></a></div></div></header><div class=post><p>在折腾 Feedly 的时候偶然发现自己的博客输出的 RSS 里面只有摘要，想要看完整的内容需要跳转。这可不符合我的初衷，于是花了一些时间配置了一下相关的内容。接下来简要的介绍一下如何配置 Hugo 的模板以生成输出全文的 RSS Feed。</p><h2 id=rtfm>R.T.F.M.</h2><p>在折腾之前，首先阅读一下 Hugo 的文档： <a href=https://gohugo.io/templates/rss/>https://gohugo.io/templates/rss/</a> 。从文档中知道了以下两件事：</p><ul><li>RSS 模板的查找顺序</li><li>Hugo 自带的 RSS 模板的内容</li></ul><p>那么想要自定义 RSS 模板的话，只需要在合适的地方放上模板即可。</p><h2 id=rss-模板的位置>RSS 模板的位置</h2><p>Hugo 内置模板查找的优先级别是最低的，所以只要选择任意一个符合要求的位置都能覆盖它。我选择放在主题的 <code>layouts</code> 目录下，也就是 <code>layouts/index.rss.xml</code>。</p><h2 id=rss-模板的内容>RSS 模板的内容</h2><p>忽略掉一些无关的细节，导致 RSS 输出的文章内容中只有摘要的是如下模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Summary</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
</code></pre></div><p><code>.Summary</code> 引用的是文章的摘要部分，只要将其替换为 <code>.Content</code> 就能输出文章的完整内容。但是默认情况下，Hugo 会在 RSS Feed 中输出所有文章，如果输出完整内容的话，这个 Feed 会特别大，因此需要想办法限制一下展示的文章数量。继续 RTFM，<a href=https://gohugo.io/functions/first/>此处</a> 描述了一个叫 <code>first</code> 的方法，跟 <code>range</code> 搭配起来之后可以起到切片的作用。这样就能够得到如下的模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span>first<span style=color:#bbb> </span>10<span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Content</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
</code></pre></div><p>完整的模板可以参见 commit: <a href=https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944>https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944</a></p><h2 id=动态>动态</h2><ul><li>Feedly 上除了我自己居然要还有 5 个订阅用户，有些感动，如果有在北京的童鞋可以邮件我一起约个饭~</li><li>清明节去了趟苏州，看到了大裤衩，还看了金鸡湖的音乐喷泉，然后拙政园基本啥都没看着，全是人头= =，出来之后就不想再去任何园林了</li><li>终于下定决心买了 ThinkPad X1 Carbon 2018 (故意写全就是为了装)，等四月底到手了发一波开箱照</li><li>又要开工了，体会到了久违的小学生暑假开学前一天的心情，大概是因为以前一直没有好好的休假过。。。</li></ul></div><div id=gitalk-container><div class=gt-container><div class=gt-meta><span class=gt-counts>0 comments</span></div><div class=gt-header><a class=gt-avatar-github><span class="gt-avatar gt-comment-avatar"><img src=https://www.gravatar.com/avatar/></span></a><div class=gt-header-comment><form class=gt-header-form target=comment-iframe method=post action=https://gitqus.now.sh/v0/comments/github.com/Xuanwo/xuanwo.github.io/master><input type=hidden name=slug value=static/2018/04/08/hugo-rss-output-all-content/>
<input class=gt-header-input type=text name=name placeholder=Name required>
<input class=gt-header-input type=email name=email placeholder=Email required>
<textarea class=gt-header-textarea name=content placeholder="Leave a comment"></textarea><div class=gt-header-controls><button class=gt-btn><span class=gt-btn-text>Submit</span></button></div><iframe name=comment-iframe hidden id=frame></iframe></form></div></div><div class=gt-comments></div></div></div></article></main><footer class="footer container"><a class=main-nav-link href=/categories/>Categories</a>
<a class=main-nav-link href=/tags/>Tags</a>
<a class=main-nav-link href=/series/>Series</a>
<a class=main-nav-link href=/blogroll/>Blogroll</a>
<a class=main-nav-link href=/index.xml>Subscribe</a>
<script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></footer></body></html>