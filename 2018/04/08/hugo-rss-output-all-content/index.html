<!doctype html><html><head><title>Hugo RSS 配置输出全文</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content=Technology,Code,Program,Linux,><meta name=author content=Xuanwo><meta property=og:title content="Hugo RSS 配置输出全文"><meta property=og:description content="A blog maintained by an interesting programmer."><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:url content=https://xuanwo.io/2018/04/08/hugo-rss-output-all-content/><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/milligram@1.3.0/dist/milligram.min.css integrity="sha256-Ro/wP8uUi8LR71kwIdilf78atpu8bTEwrK5ZotZo+Zc=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.css><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.55.6"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;><svg width="1em" height="1em" viewBox="0 0 100 100"><use xlink:href="/svg/fontawesome.svg#bars"/></svg></a><a id=logo class=logo-text href=https://xuanwo.io>Xuanwo&#39;s Blog</a><nav id=main-nav><a class=main-nav-link href=/categories/>分类</a>
<a class=main-nav-link href=/tags/>标签</a>
<a class=main-nav-link href=/series/>专题</a>
<a class=main-nav-link href=/blogroll/>友链</a>
<a class=main-nav-link href=/index.xml>订阅</a>
<a class=main-nav-link href=/about/>关于我</a></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>Hugo RSS 配置输出全文</h1></header><div class=article-meta><a href=/2018/04/08/hugo-rss-output-all-content/ class=article-date><time datetime=2018-04-08T16:07:00.000&#43;00:00 itemprop=datePublished>2018-04-08</time></a><div class=post-categories><div class=article-category><a class=article-category-link href=https://xuanwo.io/categories/code>Code</a></div></div><div class=article-comment-link-wrap><a href=/2018/04/08/hugo-rss-output-all-content/#disqus_thread class=article-comment-link>Comments</a></div></div><div class=article-entry itemprop=articleBody><p>在折腾 Feedly 的时候偶然发现自己的博客输出的 RSS 里面只有摘要，想要看完整的内容需要跳转。这可不符合我的初衷，于是花了一些时间配置了一下相关的内容。接下来简要的介绍一下如何配置 Hugo 的模板以生成输出全文的 RSS Feed。</p><h2 id=r-t-f-m>R.T.F.M.</h2><p>在折腾之前，首先阅读一下 Hugo 的文档： <a href=https://gohugo.io/templates/rss/>https://gohugo.io/templates/rss/</a> 。从文档中知道了以下两件事：</p><ul><li>RSS 模板的查找顺序</li><li>Hugo 自带的 RSS 模板的内容</li></ul><p>那么想要自定义 RSS 模板的话，只需要在合适的地方放上模板即可。</p><h2 id=rss-模板的位置>RSS 模板的位置</h2><p>Hugo 内置模板查找的优先级别是最低的，所以只要选择任意一个符合要求的位置都能覆盖它。我选择放在主题的 <code>layouts</code> 目录下，也就是 <code>layouts/index.rss.xml</code>。</p><h2 id=rss-模板的内容>RSS 模板的内容</h2><p>忽略掉一些无关的细节，导致 RSS 输出的文章内容中只有摘要的是如下模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Summary</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span></code></pre></div><p><code>.Summary</code> 引用的是文章的摘要部分，只要将其替换为 <code>.Content</code> 就能输出文章的完整内容。但是默认情况下，Hugo 会在 RSS Feed 中输出所有文章，如果输出完整内容的话，这个 Feed 会特别大，因此需要想办法限制一下展示的文章数量。继续 RTFM，<a href=https://gohugo.io/functions/first/>此处</a> 描述了一个叫 <code>first</code> 的方法，跟 <code>range</code> 搭配起来之后可以起到切片的作用。这样就能够得到如下的模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span>first<span style=color:#bbb> </span>10<span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Content</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span></code></pre></div><p>完整的模板可以参见 commit: <a href=https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944>https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944</a></p><h2 id=动态>动态</h2><ul><li>Feedly 上除了我自己居然要还有 5 个订阅用户，有些感动，如果有在北京的童鞋可以邮件我一起约个饭~</li><li>清明节去了趟苏州，看到了大裤衩，还看了金鸡湖的音乐喷泉，然后拙政园基本啥都没看着，全是人头= =，出来之后就不想再去任何园林了</li><li>终于下定决心买了 ThinkPad X1 Carbon 2018 (故意写全就是为了装)，等四月底到手了发一波开箱照</li><li>又要开工了，体会到了久违的小学生暑假开学前一天的心情，大概是因为以前一直没有好好的休假过。。。</li></ul></div><div class=article-toc></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/hugo>Hugo</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://xuanwo.io/tags/blog>Blog</a></li></ul></footer></div><nav id=article-nav><a href=/2018/04/15/reference-and-copy-in-python/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
Python 中的引用与拷贝</div></a><a href=/2018/04/01/python-os-walk/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>Python os walk 的坑&nbsp;<span>&gt;</span></div></a></nav></article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){this.page.identifier='\/2018\/04\/08\/hugo-rss-output-all-content\/';this.page.title='Hugo RSS 配置输出全文';this.page.url='https:\/\/xuanwo.io\/2018\/04\/08\/hugo-rss-output-all-content\/';};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"only0god"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2019 Xuanwo&#39;s Blog&nbsp;
Powered by <a href=https://gohugo.io target=_blank>Hugo</a></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js></script><script>tocbot.init({tocSelector:'.article-toc',contentSelector:'.article-entry',headingSelector:'h1, h2, h3, h4, h5',});</script><script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var header=document.getElementById('header');if(header.classList.contains('mobile-on')){header.classList.remove('mobile-on');}else{header.classList.add('mobile-on');}});</script></footer></div></body></html>